<div class = "content">
  <div>
    <mat-form-field>
      <mat-label>Select Cryptocurrencies</mat-label>
      <mat-select (selectionChange) = "getSelectedMetrics($event.value)" multiple>
        <mat-select-filter [array]="coins" [displayMember]="'symbol'" (filteredReturn)="filtered = $event"></mat-select-filter>
        <mat-option *ngFor="let coin of filtered" [value] = "coin.symbol">
          {{coin.symbol}}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <div *ngIf = "metrics.length">
    <table mat-table [dataSource]="metrics" >
      <ng-container matColumnDef="symbol">
        <th mat-header-cell *matHeaderCellDef> Ticker </th>
        <td mat-cell *matCellDef="let coin"> {{coin.symbol}} </td>
      </ng-container>

      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef> Name </th>
        <td mat-cell *matCellDef="let coin"> {{coin.name}} </td>
      </ng-container>

      <ng-container matColumnDef="price">
        <th mat-header-cell *matHeaderCellDef> Price (USD) </th>
        <td mat-cell *matCellDef="let coin"> {{coin.price}} </td>
      </ng-container>

      <ng-container matColumnDef="percent_change_24h">
        <th mat-header-cell *matHeaderCellDef> Percent Change (24h) </th>
        <td mat-cell *matCellDef="let coin"> {{coin.percent_change_24h > 0 ? '+' + coin.percent_change_24h : coin.percent_change_24h}} </td>
      </ng-container>

      <ng-container matColumnDef="percent_change_7d">
        <th mat-header-cell *matHeaderCellDef> Percent Change (7d) </th>
        <td mat-cell *matCellDef="let coin"> {{coin.percent_change_7d > 0 ? '+' + coin.percent_change_7d : coin.percent_change_7d}} </td>
      </ng-container>

      <ng-container matColumnDef="percent_change_30d">
        <th mat-header-cell *matHeaderCellDef> Percent Change (30d) </th>
        <td mat-cell *matCellDef="let coin"> {{coin.percent_change_30d > 0 ? '+' + coin.percent_change_30d : coin.percent_change_30d}} </td>
      </ng-container>

      <ng-container matColumnDef="max_supply">
        <th mat-header-cell *matHeaderCellDef> Max Supply</th>
        <td mat-cell *matCellDef="let coin"> {{coin.max_supply | number}} </td>
      </ng-container>

      <ng-container matColumnDef="market_cap">
        <th mat-header-cell *matHeaderCellDef> Market Cap </th>
        <td mat-cell *matCellDef="let coin"> {{coin.market_cap | number}} </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
      <tr mat-row *matRowDef="let row; columns: columnsToDisplay;"></tr>
    </table>
  </div>

  <div *ngIf = "!metrics.length">
    <p></p>
    <p>
      No cryptocurrencies selected for display
    </p>
  </div>

</div>

